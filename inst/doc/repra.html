<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Getting started with REPRA</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<!--
%\VignetteEngine{knitr}
%\VignetteIndexEntry{Getting started}
-->

<h1>Getting started with REPRA</h1>

<p>The Renewable Energy Probabilistic Resource Adequacy tool (REPRA) can be used to answer resource adequacy questions in the presence of variable generation (VG). This document shows an example of the basic capabilities of the package.  The examples utilize part of the built-in datasets that are included in the package.</p>

<p>First load the package into memory, along with others that are used in this demonstration.</p>

<pre><code class="r">library(repra)
library(dplyr)
library(reshape2)
library(ggplot2)
</code></pre>

<h2>Input data</h2>

<p>All the calculations require two basic inputs, which are introduced in this section: an outage table and time series data.</p>

<h3>Outage table</h3>

<p>An outage table combines existing conventional generation and indicates the loss-of-load probability (LOLP) for different load levels. This object is created with the <code>outage_table</code> function, which requires input to be formatted as a <code>data.frame</code> with a column of capacity and expected forced outage rates (EFOR). For more information on the function, consult the help <code>?outage_table</code>.</p>

<pre><code class="r">gens &lt;- repragen %&gt;%
  filter(Area == &quot;AZ-NM-NV&quot;)
head(gens)
</code></pre>

<pre><code>#&gt;       Area Capacity   EFOR
#&gt; 1 AZ-NM-NV      6.9 0.0000
#&gt; 2 AZ-NM-NV      6.9 0.0000
#&gt; 3 AZ-NM-NV      3.0 0.0000
#&gt; 4 AZ-NM-NV    170.1 0.0380
#&gt; 5 AZ-NM-NV    117.8 0.0380
#&gt; 6 AZ-NM-NV    113.6 0.0248
</code></pre>

<pre><code class="r">out.table &lt;- outage_table(gens)
head(out.table)
</code></pre>

<pre><code>#&gt;    Level     Area Capacity Capacity2      Prob      LOLP   BaseEUE
#&gt; 1:  Area AZ-NM-NV    66462     66462 2.755e-09 1.002e-06 0.000e+00
#&gt; 2:  Area AZ-NM-NV    66463     66463 2.763e-09 1.004e-06 2.755e-09
#&gt; 3:  Area AZ-NM-NV    66464     66464 2.770e-09 1.007e-06 8.273e-09
#&gt; 4:  Area AZ-NM-NV    66465     66465 2.777e-09 1.010e-06 1.656e-08
#&gt; 5:  Area AZ-NM-NV    66466     66466 2.785e-09 1.013e-06 2.763e-08
#&gt; 6:  Area AZ-NM-NV    66467     66467 2.792e-09 1.015e-06 4.147e-08
</code></pre>

<p>An outage table can be easily plotted and summarized.</p>

<pre><code class="r">plot(out.table)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-4"/> </p>

<pre><code class="r">summary(out.table)
</code></pre>

<pre><code>#&gt;    Level     Area   Max  Mean   SD
#&gt; 1:  Area AZ-NM-NV 75700 73246 1008
</code></pre>

<h3>Time series data</h3>

<p>Time series need to be formatted with the <code>format_timedata</code> function before they can be used by other functions in the package. Time series must contain, at least, load data. Additional columns will be assumed to be VG and will be automatically be used in the other calculations.</p>

<pre><code class="r">tdata &lt;- repratime %&gt;% filter(Area == &quot;AZ-NM-NV&quot;)
head(tdata)
</code></pre>

<pre><code>#&gt;       Area Time  Load CSP PV Wind
#&gt; 1 AZ-NM-NV    1 14204   0  0 1219
#&gt; 2 AZ-NM-NV    2 13864   0  0 1355
#&gt; 3 AZ-NM-NV    3 13778   0  0 1437
#&gt; 4 AZ-NM-NV    4 13777   0  0 1184
#&gt; 5 AZ-NM-NV    5 14233   0  0 1419
#&gt; 6 AZ-NM-NV    6 15371   0  0 1876
</code></pre>

<pre><code class="r">td &lt;- format_timedata(tdata)
head(td)
</code></pre>

<pre><code>#&gt;   Level     Area Time Day WinProb  Load CSP PV Wind
#&gt; 1  Area AZ-NM-NV    1   1       1 14204   0  0 1219
#&gt; 2  Area AZ-NM-NV    2   1       1 13864   0  0 1355
#&gt; 3  Area AZ-NM-NV    3   1       1 13778   0  0 1437
#&gt; 4  Area AZ-NM-NV    4   1       1 13777   0  0 1184
#&gt; 5  Area AZ-NM-NV    5   1       1 14233   0  0 1419
#&gt; 6  Area AZ-NM-NV    6   1       1 15371   0  0 1876
</code></pre>

<h2>Calculate metrics</h2>

<p>To calculate reliability metrics, a time series with a <code>NetLoad</code> column must be provided to <code>calculate_metrics</code>. For example, here are the metrics for load (in this case the load is scaled or otherwise all values would be zero).</p>

<pre><code class="r">td2 &lt;- td %&gt;%
  mutate(NetLoad = 2.02 * Load)
calculate_metrics(td2, out.table)
</code></pre>

<pre><code>#&gt; Source: local data frame [1 x 6]
#&gt; Groups: Level, Area
#&gt; 
#&gt;   Level     Area     LOLE    LOLH PeakLOLP   EUE
#&gt; 1  Area AZ-NM-NV 0.008366 0.01385 0.004195 6.382
</code></pre>

<p>The <code>raw</code> parameter allows us to see the actual values of LOLP and EUE for each hour.</p>

<pre><code class="r">cv &lt;- calculate_metrics(td2, out.table, raw = TRUE)
cv %&gt;%
  arrange(-Capacity) %&gt;%
  as.data.frame() %&gt;%
  head()
</code></pre>

<pre><code>#&gt;   Level     Area Capacity Capacity2      Prob      LOLP BaseEUE Time Day
#&gt; 1  Area AZ-NM-NV    69997     69997 8.127e-06 0.0041950  2.0356 4912 205
#&gt; 2  Area AZ-NM-NV    69694     69694 4.641e-06 0.0023038  1.0788 5824 243
#&gt; 3  Area AZ-NM-NV    69688     69687 4.580e-06 0.0022715  1.0629 4913 205
#&gt; 4  Area AZ-NM-NV    69502     69502 3.211e-06 0.0015570  0.7132 4889 204
#&gt; 5  Area AZ-NM-NV    69488     69488 3.125e-06 0.0015126  0.6917 4888 204
#&gt; 6  Area AZ-NM-NV    68904     68904 9.571e-07 0.0004337  0.1851 5825 243
#&gt;   WinProb  Load  CSP   PV   Wind    EUE
#&gt; 1       1 34652 1660 1688  71.78 2.0357
#&gt; 2       1 34502 1677 1632 183.99 1.0789
#&gt; 3       1 34499 1521 1197  53.91 1.0651
#&gt; 4       1 34407 1611 1326 180.83 0.7134
#&gt; 5       1 34400 1682 1706 178.12 0.6917
#&gt; 6       1 34111 1600 1201 225.46 0.1852
</code></pre>

<p>These metrics can also be calcuated after adding wind.</p>

<pre><code class="r">td2.wind &lt;- td %&gt;%
  mutate(NetLoad = 2.02 * Load - Wind)
calculate_metrics(td2.wind, out.table)
</code></pre>

<pre><code>#&gt; Source: local data frame [1 x 6]
#&gt; Groups: Level, Area
#&gt; 
#&gt;   Level     Area     LOLE    LOLH PeakLOLP   EUE
#&gt; 1  Area AZ-NM-NV 0.006542 0.01076 0.003646 4.907
</code></pre>

<h2>Calculate ELCC</h2>

<p>Effective load carrying capacity (ELCC) is the maximum load that can be served at a give reliability metric (by default 1 day in 10 years daily LOLE). For this calculations, the load shape is modified until the desired level is reached. For more information on this process consult the help page for <code>calculate_elcc</code>.</p>

<pre><code class="r">elcc &lt;- calculate_elcc(td, out.table)
as.data.frame(elcc)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective ActualObj  ErrorObj Multiplier  ELCC
#&gt; 1  Area AZ-NM-NV   LOLE       0.1       0.1 0.0004429      2.134 73940
#&gt;                VG LoadMethod LOLE   LOLH PeakLOLP   EUE
#&gt; 1 CSP + PV + Wind Flat block  0.1 0.3026  0.02621 151.9
</code></pre>

<p>By default, ELCC is calculated with all the available VG data. The following example takes the series <code>Wind</code> out of the calculations.</p>

<pre><code class="r">elcc2 &lt;- calculate_elcc(td, out.table, ignore = &quot;Wind&quot;)
as.data.frame(elcc2)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective ActualObj  ErrorObj Multiplier  ELCC
#&gt; 1  Area AZ-NM-NV   LOLE       0.1       0.1 0.0002675      2.129 73777
#&gt;         VG LoadMethod LOLE   LOLH PeakLOLP   EUE
#&gt; 1 CSP + PV Flat block  0.1 0.3031  0.02184 151.3
</code></pre>

<p>ELCC can be calculated for different metrics and different objective values.</p>

<pre><code class="r">elcc3 &lt;- calculate_elcc(td, out.table, obj.metric = &quot;LOLH&quot;, obj.value = 1.0)
as.data.frame(elcc3)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective ActualObj  ErrorObj Multiplier  ELCC
#&gt; 1  Area AZ-NM-NV   LOLH         1         1 6.448e-05      2.153 74608
#&gt;                VG LoadMethod   LOLE LOLH PeakLOLP   EUE
#&gt; 1 CSP + PV + Wind Flat block 0.3172    1  0.07408 544.9
</code></pre>

<h2>Calculate capacity value</h2>

<p>Capacity value is the increase in ELCC (measured with the same risk level) when a new resource is added to the system. The <code>capacity_value</code> function automatically calculates capacity value for each of the VG time series and adds it to the load in order.</p>

<pre><code class="r">cv &lt;- capacity_value(td, out.table)
as.data.frame(cv)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective ActualObj   ErrorObj Multiplier  ELCC
#&gt; 1  Area AZ-NM-NV   LOLE       0.1       0.1  2.850e-04      2.050 71022
#&gt; 2  Area AZ-NM-NV   LOLE       0.1       0.1 -4.327e-05      2.096 72614
#&gt; 3  Area AZ-NM-NV   LOLE       0.1       0.1  2.675e-04      2.129 73777
#&gt; 4  Area AZ-NM-NV   LOLE       0.1       0.1  4.429e-04      2.134 73940
#&gt;                VG LoadMethod LOLE   LOLH PeakLOLP   EUE   CVTech      CV
#&gt; 1                 Flat block  0.1 0.2386  0.02656 120.7 BaseELCC 71022.4
#&gt; 2             CSP Flat block  0.1 0.2595  0.02371 130.0      CSP  1591.7
#&gt; 3        CSP + PV Flat block  0.1 0.3031  0.02184 151.3       PV  1162.4
#&gt; 4 CSP + PV + Wind Flat block  0.1 0.3026  0.02621 151.9     Wind   163.2
</code></pre>

<p>This information can be reformatted and presented in a more pleseant format. It can also be easily plotted.</p>

<pre><code class="r">dcast(cv, Level + Area + Metric + Objective ~ CVTech, value.var = &quot;CV&quot;)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective BaseELCC  CSP   PV  Wind
#&gt; 1  Area AZ-NM-NV   LOLE       0.1    71022 1592 1162 163.2
</code></pre>

<pre><code class="r">ggplot(cv, aes(x = paste(Level, Area, sep = &quot;, &quot;), weight = CV, fill = CVTech)) +
  geom_bar() +
  labs(x = &quot;Area&quot;, y = &quot;Capacity Value (MW)&quot;, fill = &quot;Type&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-13"/> </p>

<p>The previous example calculated the cumulative capacity value by iteratively adding VG profiles. An alternative would be to calculate the capacity value by removing only one VG profile from the total mix. The parameter <code>marginal</code> is used to change this behavior.</p>

<pre><code class="r">cv.mar &lt;- capacity_value(td, out.table, marginal = TRUE)
as.data.frame(cv.mar)
</code></pre>

<pre><code>#&gt;   Level     Area Metric Objective ActualObj  ErrorObj Multiplier  ELCC
#&gt; 1  Area AZ-NM-NV   LOLE       0.1       0.1 0.0003172      2.093 72517
#&gt; 2  Area AZ-NM-NV   LOLE       0.1       0.1 0.0000939      2.100 72762
#&gt; 3  Area AZ-NM-NV   LOLE       0.1       0.1 0.0002675      2.129 73777
#&gt;           VG LoadMethod LOLE   LOLH PeakLOLP   EUE CVTech     CV
#&gt; 1  PV + Wind Flat block  0.1 0.2593  0.03084 131.4    CSP 1422.3
#&gt; 2 CSP + Wind Flat block  0.1 0.2550  0.02709 128.6     PV 1177.5
#&gt; 3   CSP + PV Flat block  0.1 0.3031  0.02184 151.3   Wind  163.2
</code></pre>

</body>

</html>
